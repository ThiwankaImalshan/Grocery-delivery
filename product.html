<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GrocGo</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="icon" href="img/favicon.ico" type="image/x-icon">
</head>
<body>

    <!-- Navigation Bar/Header -->
    <header>
        <div class="header-navbar-checkout">
            <div class="navbar-row">
                <div class="navbar-logo">
                    <h2>GrocGo</h2>
                </div>
                <div class="navbar-items">
                    <ul>
                        <h3><a href="/index.html">Home</a></h3>
                        <h3><a href="/product.html">Products</a></h3>
                        <h3><a href="/services.html">Services</a></h3>
                        <h3><a href="/about.html">About Us</a></h3>
                        <div class="navbar-cart">
                            <small>Add to Cart</small>
                            <i class="fa fa-shopping-cart" aria-hidden="true">
                                <span id="smart-checkout-count" class="badge">0</span>
                            </i>
                        </div>
                        <div class="navbar-signin">
                            <i class="fa fa-user-circle-o" aria-hidden="true"></i>
                        </div>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Cart-Tab -->
        <div class="cartTab">
            <h1>Shopping Cart</h1>
            <div class="listCart">

            </div>
            <div class="cartTab-btn">
                <button class="cartTab-close">Close</button>
                <button class="cartTab-checkOut" onclick="document.location='checkout.html'">Check Out</button>
            </div>
        </div>
    </header>

    <div class="carousel">
        <div class="carousel-inner">
          <div class="carousel-item">
            <img src="promotion img/Slide1.jpg" alt="Image 1">
          </div>
          <div class="carousel-item">
            <img src="promotion img/Slide2.jpg" alt="Image 2">
          </div>
          <div class="carousel-item">
            <img src="promotion img/Slide4.jpg" width="100%" alt="Image 3">
          </div>
        </div>
      </div>


      <!-- Product Section -->
      <div class="search-body">
        <div class="search-left-section">
            <div class="search-now">
                <div class="product-categories-bar">
                    <h3>Categories</h3>
                    <div class="item-categories-box">
                        <ul class="item-categories-ul">
                            <li id="vegitable-btn">Vegetables 
                                <span>
                                    <i class="fa fa-angle-right"></i>
                                </span>
                            </li>
                            <li id="fruit-btn">Fruits
                                <span>
                                    <i class="fa fa-angle-right"></i>
                                </span>
                            </li>
                            <li id="meat-btn">Meat
                                <span>
                                    <i class="fa fa-angle-right"></i>
                                </span>
                            </li>
                            <li>Fish
                                <span>
                                    <i class="fa fa-angle-right"></i>
                                </span>
                            </li>
                            <li>Beverages
                                <span>
                                    <i class="fa fa-angle-right"></i>
                                </span>
                            </li>
                            <li>Chilled
                                <span>
                                    <i class="fa fa-angle-right"></i>
                                </span>
                            </li>
                            <li>Grocery
                                <span>
                                    <i class="fa fa-angle-right"></i>
                                </span>
                            </li>
                            <li>Pharmacy
                                <span>
                                    <i class="fa fa-angle-right"></i>
                                </span>
                            </li>
                            <li>Bakery Production
                                <span>
                                    <i class="fa fa-angle-right"></i>
                                </span>
                            </li>
                            <li>Homeware
                                <span>
                                    <i class="fa fa-angle-right"></i>
                                </span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- <div class="search-right-section" id="searchRightSection"> -->
            <div class="search-right-section" id="catalog">
            <div class="product-searching-result">
                
            </div>

            </div>

        </div>

        </div>
    </div>



    <!-- Footer Section -->
    <footer>
        <div class="footer-container">
            <img src="img/footer-bg.png" alt="Footer Background">
            <div class="footer-content">
                <div class="footer-content-sec1">
                    <div class="footer-sec footer-sec1">
                        <h3>GrocGo</h3><br>
                        <p>Copyright Â© 2024 GrocGo  LK (PVT) Ltd. </p>
                        <p>All Rights Reserved</p>
                        <p>Designed & Developed by .......................</p>
                    </div>
                </div>
                <div class="footer-content-sec2">
                    <div class="footer-sec footer-sec2">
                        <h3>Customer Care</h3><br>
                        <p><a href="/about.html">About US</a></p>
                        <p><a href="/services.html">Services</a></p>
                        <p><a href="">Privacy Policy</a></p>
                    </div>
                    <div class="footer-sec footer-sec3">
                        <h3>Contact Us</h3><br>
                        <p><a href="tel:+9471234567"><i class="fa fa-phone" aria-hidden="true"></i>&nbsp;&nbsp;+9471234567</a></p>
                        <p><a href="https://maps.app.goo.gl/iZKTKozdvHXE7WxQ9"><i class="fa fa-map-marker" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;Waidya Road, Dehiwala</a></p>
                        <p><a href="mailto: grocgo@gmail.com"><i class="fa fa-envelope" aria-hidden="true"></i>&nbsp;&nbsp;grocgo@gmail.com</a></p>
                    </div>
                </div>
            </div>
        </div>
    </footer> 


    
        
    <script src="script.js"></script>
    <script src="product.js"></script>
    <script>

        // Read the selected item from localStorage
        document.addEventListener('DOMContentLoaded', function() {
            const selectedItemId = localStorage.getItem('selectedItemId');
            if (selectedItemId) {
                // Perform action based on selected item
                switch (selectedItemId) {
                    case 'sub_dep_1_all':
                        // Perform action for 'All Vegetables'
                        document.getElementById('vegitable-btn').click();
                        break;
                    case 'sub_dep_1_organic':
                        // Perform action for 'Organic'
                        break;
                    case 'sub_dep_1_inorganic':
                        // Perform action for 'Inorganic'
                        break;
                    case 'sub_dep_1_packets':
                        // Perform action for 'Packets'
                        break;
                    case 'sub_dep_2_all':
                        document.getElementById('fruit-btn').click();
                        // Perform action for 'All Fruits'
                        break;
                    case 'sub_dep_2_organic':
                        // Perform action for 'Organic'
                        break;
                    case 'sub_dep_2_inorganic':
                        // Perform action for 'Inorganic'
                        break;
                    case 'sub_dep_2_packets':
                        // Perform action for 'Packets'
                        break;
                    // Add cases for other sub-departments as needed
                    default:
                        // Handle other cases if needed
                }
                // Clear the selected item from localStorage
                localStorage.removeItem('selectedItemId');
            }
        });



        //------------Cart window---------------
        let navCart = document.querySelector('.navbar-cart');
        let bodyContain = document.querySelector('body');
        let closeTheCart = document.querySelector('.cartTab-close');
        // Show Cart
        navCart.addEventListener('click', () => {
            bodyContain.classList.toggle('showCart');
        })

        // Close Cart
        closeTheCart.addEventListener('click', () => {
            bodyContain.classList.toggle('showCart');
        })





        //_______________________Cart for each pages_________________________

        //---------------Retrieve cart data from local storage on page load----------------
        let list_Cart = document.querySelector('.listCart');
        let navbar_cartSpan = document.querySelector('.navbar-cart span');

        window.addEventListener('load', () => {
            // Get cart data from local storage
            const cartData = JSON.parse(localStorage.getItem('cart'));
            // If cart data exists, assign it to cartBox array
            if (cartData && Array.isArray(cartData)) {
                cartBox = cartData;
            }
            console.log(cartBox);
            // Render cart items from local storage
            renderCartItemsFromLocalStorage();
        });

        // Function to render the cart items from local storage
        const renderCartItemsFromLocalStorage = () => {
            console.log("Rendering cart items from local storage...");
            console.log("Cart data from local storage:", cartBox);

            // Get outerArray data from local storage
            const outerItems = JSON.parse(localStorage.getItem('outerProductsArray'));
            
            list_Cart.innerHTML = '';
            let totalQuantity = 0;
            if (cartBox.length > 0) {
                cartBox.forEach(cartss => {
                    totalQuantity += cartss.quantity;
                    let newCart = document.createElement('div');
                    newCart.classList.add('listCart-items');
                    newCart.dataset.id = cartss.product_id;
                    let positionProduct = outerItems.findIndex((value) => value.id == cartss.product_id);
                    let info = outerItems[positionProduct];
                    newCart.innerHTML = `
                        <div class="listCart-image">
                            <img src="${info.image}">
                        </div>
                        <div class="listCart-name">
                            ${info.name}
                        </div>
                        <div class="listCart-totalPrice">Rs.${info.price * cartss.quantity}</div>
                        <div class="listCart-quantity">
                            <span class="listCart-minus"><</span>
                            <span>${cartss.quantity}</span>
                            <span class="listCart-plus">></span>
                        </div>
                    `;
                    list_Cart.appendChild(newCart);
                });
            }
            navbar_cartSpan.innerText = totalQuantity;
            console.log("Cart items rendered successfully.");
        };

    </script>
</body>
</html>