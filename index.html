<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GrocGo</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon">
    <link rel="icon" href="img/favicon.ico" type="image/x-icon">
</head>
<body onload="loadingFunction()">
    
    <div id="loader">
        <img src="img/G icon.gif" alt="">
    </div>

    <div id="container" style="display:none;">
    <!-- Navigation Bar/Header -->
    <header>
            <div class="header-navbar">
                <div class="navbar-row">
                    <div class="navbar-logo">
                        <h2>GrocGo</h2>
                    </div>
                    <div class="navbar-items">
                        <ul>
                            <h3><a href="index.html">Home</a></h3>
                            <h3><a href="product.html">Products</a></h3>
                            <h3><a href="services.html">Services</a></h3>
                            <h3><a href="about.html">About Us</a></h3>
                            <div class="navbar-cart">
                                <small>Add to Cart</small>
                                <i class="fa fa-shopping-cart" aria-hidden="true">
                                    <span id="smart-checkout-count" class="badge">0</span>
                                </i>
                            </div>
                            <div class="navbar-signin">
                                <i class="fa fa-user-circle-o" aria-hidden="true"></i>
                            </div>
                        </ul>
                    </div>
                </div>
                <div class="header-searchbar">
                    <div class="product-search">
                        <div class="category_menu_btn_product_search" id="btn-categories">
                            <span>Categories </span>
                            <i class="fa fa-angle-down" style="padding-left: 0.9375rem;"></i>
                        </div>
                        <div class="auto-complete-text">
                            <input type="text" placeholder="Search for any product" value="" id="searchInput" oninput="suggestProducts()" >
                            <ul id="searchResults" class="search-result"></ul>
                        </div>
                        <button class="product-search-button" onclick="passDataAndRedirect()">
                            <span>SEARCH PRODUCTS </span>
                            <i class="fa fa-search" style="padding-left: 0.625rem;"></i>
                        </button>
                    </div>
                    

                    <!-- Drop Down Menu -->
                    <div class="category-drop-down-menu" id="category_menu_default_header" style="display: block;">
                        <img src="img/close Button.png" alt="menu-close_btn" class="category-menu-default-header-close-btn" id="close-category-menu">
                        <div class="category-menu-default-header-container">
                            <ul class="category_menu_default_header-area">

                                <li id="dep_id_1">Vegetables 
                                    <span>
                                        <i class="fa fa-angle-right"></i>
                                    </span>
                                </li>
                                <ul id="sub_dep_id_1" style="display: none;">
                                    <a onclick="handleItemClick('sub_dep_1_all')">
                                        <li class="cat_item_" data-cat-id="all">
                                            <strong>All Vegetables</strong>
                                        </li>
                                    </a>
                                    <a onclick="handleItemClick('sub_dep_1_organic')">
                                        <li>Organic</li>
                                    </a>
                                    <a onclick="handleItemClick('sub_dep_1_inorganic')">
                                        <li>Inorganic</li>
                                    </a>
                                    <a onclick="handleItemClick('sub_dep_1_packets')">
                                        <li>Packets</li>
                                    </a>
                                </ul>
                                
                                <li id="dep_id_2">Fruits 
                                    <span>
                                        <i class="fa fa-angle-right"></i>
                                    </span>
                                </li>
                                    <ul id="sub_dep_id_2" style="display: none;">
                                        <a onclick="handleItemClick('sub_dep_2_all')">
                                            <li class="cat_item_" data-cat-id="all">
                                                <strong>All Fruits</strong>
                                            </li>
                                        </a>
                                        <a onclick="handleItemClick('sub_dep_2_organic')">
                                            <li>Organic</li>
                                        </a>
                                        <a onclick="handleItemClick('sub_dep_2_inorganic')">
                                            <li>Inorganic</li>
                                        </a>
                                    </ul>

                                    <li id="dep_id_3">Meat 
                                        <span>
                                            <i class="fa fa-angle-right"></i>
                                        </span>
                                    </li>
                                    <ul id="sub_dep_id_3" style="display: none;">
                                        <a>
                                            <li class="cat_item_" data-cat-id="all">
                                                <strong>All Meat</strong>
                                            </li>
                                        </a>
                                        <a>
                                            <li>Fresh Meat</li>
                                        </a>
                                        <a>
                                            <li>Processed Meat Serve Over</li>
                                        </a>
                                        <a>
                                            <li>Frozen Chicken</li>
                                        </a>
                                    </ul>

                                    <li id="dep_id_4">Fish 
                                        <span>
                                            <i class="fa fa-angle-right"></i>
                                        </span>
                                    </li>
                                    <ul id="sub_dep_id_4" style="display: none;">
                                        <a>
                                            <li class="cat_item_" data-cat-id="all">
                                                <strong>All Fish</strong>
                                            </li>
                                        </a>
                                        <a>
                                            <li>Fresh Sea Food</li>
                                        </a>
                                    </ul>
                                    
                                    <li id="dep_id_5">Beverages 
                                        <span>
                                            <i class="fa fa-angle-right"></i>
                                        </span>
                                    </li>
                                    <ul id="sub_dep_id_5" style="display: none;">
                                        <a>
                                            <li class="cat_item_" data-cat-id="all">
                                                <strong>All Beverages</strong>
                                            </li>
                                        </a>
                                        <a>
                                            <li>Juices &amp; Carbonates</li>
                                        </a>
                                        <a>
                                            <li>Malt Drink</li>
                                        </a>
                                        <a>
                                            <li>Sports &amp; Energy Drinks</li>
                                        </a>
                                        <a>
                                            <li>Milk &amp; Creamers</li>
                                        </a>
                                        <a>
                                            <li>RTD Beverages</li>
                                        </a>
                                        <a>
                                            <li>Water</li>
                                        </a>
                                    </ul>

                                    <li id="dep_id_6">Chilled 
                                        <span>
                                            <i class="fa fa-angle-right"></i>
                                        </span>
                                    </li>
                                    <ul id="sub_dep_id_6" style="display: none;">
                                        <a>
                                            <li class="cat_item_" data-cat-id="all">
                                                <strong>All Chilled</strong>
                                            </li>
                                        </a>
                                        <a>
                                            <li>Desserts</li>
                                        </a>
                                        <a>
                                            <li>Cheese</li>
                                        </a>
                                        <a>
                                            <li>Yoghurt</li>
                                        </a>
                                    </ul>

                                    <li id="dep_id_7">Grocery 
                                        <span>
                                            <i class="fa fa-angle-right"></i>
                                        </span>
                                    </li>
                                    <ul id="sub_dep_id_7" style="display: none;">
                                        <a>
                                            <li class="cat_item_" data-cat-id="all">
                                                <strong>All Grocery</strong>
                                            </li>
                                        </a>
                                        <a>
                                            <li>Pasta &amp; Noodles</li>
                                        </a>
                                        <a>
                                            <li>Snacks</li>
                                        </a>
                                        <a>
                                            <li>Cerials</li>
                                        </a>
                                        <a>
                                            <li>Oils</li>
                                        </a>
                                        <a>
                                            <li>Sauces</li>
                                        </a>
                                        <a>
                                            <li>Flour</li>
                                        </a>
                                        <a>
                                            <li>Biscuits</li>
                                        </a>
                                        <a>
                                            <li>Sugar</li>
                                        </a>
                                        <a>
                                            <li>Eggs</li>
                                        </a>
                                    </ul>
                                    <li id="dep_id_8">Pharmacy 
                                        <span>
                                            <i class="fa fa-angle-right"></i>
                                        </span>
                                    </li>
                                    <ul id="sub_dep_id_8" style="display: none;">
                                        <a>
                                            <li class="cat_item_" data-cat-id="all">
                                                <strong>All Pharmacy</strong>
                                            </li>
                                        </a>
                                        <a>
                                            <li>Skin &amp; Hair Care</li>
                                        </a>
                                        <a>
                                            <li>First Aid</li>
                                        </a>
                                        <a>
                                            <li>Lifestyle &amp; Wellbeing</li>
                                        </a>
                                    </ul>
                                    <li id="dep_id_9">Bakery Production
                                        <span>
                                            <i class="fa fa-angle-right"></i>
                                        </span>
                                    </li>
                                    <ul id="sub_dep_id_9" style="display: none;">
                                        <a>
                                            <li class="cat_item_" data-cat-id="all">
                                                <strong>All Bakery Production</strong>
                                            </li>
                                        </a>
                                        <a>
                                            <li>Bakery</li>
                                        </a>
                                    </ul>
                                    <li id="dep_id_10">Homeware
                                        <span>
                                            <i class="fa fa-angle-right"></i>
                                        </span>
                                    </li>
                                    <ul id="sub_dep_id_10" style="display: none;">
                                        <a>
                                            <li class="cat_item_" data-cat-id="all">
                                                <strong>All Homeware</strong>
                                            </li>
                                        </a>
                                        <a>
                                            <li>Tools</li>
                                        </a>
                                        <a>
                                            <li>Kitchenware</li>
                                        </a>
                                        <a>
                                            <li>Genaral Needs</li>
                                        </a>
                                        <a>
                                            <li>Greeting Cards</li>
                                        </a>
                                        <a>
                                            <li>Books &amp; Stationry</li>
                                        </a>
                                    </ul>
                        </div>
                    </div>

                </div>
            </div>

   

    <!-- Cart-Tab -->
    <div class="cartTab">
        <h1>Shopping Cart</h1>
        <div class="listCart">

        </div>
        <div class="cartTab-btn">
            <button class="cartTab-close">Close</button>
            <button class="cartTab-checkOut" onclick="document.location='checkout.html'">Check Out</button>
        </div>
    </div>
</header>



    <!-- Main container -->
    <main>
        <div class="main-container">
            <img class="background-img" src="img/Green Wave.jpg" alt="Green Wave" width="100%"> 
            <div class="main-subcontainer">
                <div class="main-subcontainer-txt">
                    <h1>Order groceries <br> to your <br><span>Door Step</span></h1>
                    <br><br>
                    <p>Whatever you want from local stores, brought right to your door.</p>
                    <button class="btn-shopnow" onclick="document.location='product.html'">Shop Now</button>
                </div>
                <div class="main-subcontainer-img">
                    <img src="img/SuperMarket.png" alt="SuperMarket Cart">
                </div>
            </div>
        </div>
    </main>

    <!-- Middle icons Bar -->
    <div class="middle-bar">
        <ul>
            <li><i class="fa fa-truck" aria-hidden="true"></i><p>Fresh to Your Door</p></li>
            <li><i class="fa fa-smile-o" aria-hidden="true"></i><p>More Choices</p></li>
            <li><i class="fa fa-shopping-bag" aria-hidden="true"></i><p>More Meals</p></li>
            <li><i class="fa fa-clock-o" aria-hidden="true"></i><p>Less Time Shopping</p></li>
        </ul>
    </div>

    <!-- Top Categories Title -->
    <div class="section-title">
        <div class="section-title-line"></div>
        <div class="section-title-text"><span>Top <strong>Categories</strong></span></div>
        <div class="section-title-line"></div>
    </div>

    <!-- Categorie Gallery -->
    <div class="gallery">
          <figure class="gallery__item gallery__item--1">
            <img src="category img/Veg Banner.jpg" class="gallery__img" alt="Image 1">
            <figcaption class="gallery-caption"><p>Vegetables</p></figcaption>
          </figure>
          <figure class="gallery__item gallery__item--2">
            <img src="category img/Rice Banner.jpg" class="gallery__img" alt="Image 2">
            <figcaption class="gallery-caption"><p>Rice & Cereals</p> </figcaption>
          </figure>
          <figure class="gallery__item gallery__item--3">
            <img src="category img/Meat Banner.jpg" class="gallery__img" alt="Image 3">
            <figcaption class="gallery-caption"><p>Meat & Fish</p></figcaption>
          </figure>
          <figure class="gallery__item gallery__item--4">
            <img src="category img/Milk Banner.jpg" class="gallery__img" alt="Image 4">
            <figcaption class="gallery-caption"><p>Dairy Products</p></figcaption>
          </figure>
    </div>

    <!-- Top Product Title -->
    <div class="section-title">
        <div class="section-title-line"></div>
        <div class="section-title-text"><span>Top <strong>Products</strong></span></div>
        <div class="section-title-line"></div>
    </div>

    <!-- Card Row -->
    <!-- <div class="carousel-container">
        <div class="carousel" id="rowBody">
        </div>
    </div> -->

    <div class="a-row-body">
        <div class="a-slider-container">
            <div class="a-slider" style="transform: translateX(0%);">
                <!-- Product rows will be dynamically inserted here -->
              </div>
        </div>
        <i class="fa fa-arrow-circle-left a-prev-btn fa-2x" aria-hidden="true"></i>
        <i class="fa fa-arrow-circle-right a-next-btn fa-2x" aria-hidden="true"></i>
      </div>

    <!-- <div class="row-body" >
        <ul class="row-body-ul" id="rowBody"> -->


            <!-- <div class="row-card">
                <div class="row-card-img">
                    <img src="img/apple.jpg" alt="Product 1">
                </div>
                <div class="row-txt">
                    <h3>Fresh Apple</h3>
                    <h4>In Stock</h4>
                    <button class="btn-addtocart">
                        Add to Cart
                    </button>
                </div>
            </div> -->

    <!-- 
        </ul>
    </div> -->

    <!-- Bottom Cards -->
    <div class="bottom-cards">
        <div class="bottom-card1">
            <p>Fresh to Your Door <br><span>Enjoy top-quality groceries deliverd fresh.</span></p>
            <img src="img/Delivary Bike.png" alt="Delivery Bike">
        </div>
        <div class="bottom-card2">
            <p>More Choices   <br><span>150+ products to inspire your culinary creations.</span></p>
            <img src="img/Grocery cart.png" alt="Grocery Cart">
        </div>
    </div>

    <!-- Footer Section -->
    <footer>
        <div class="footer-container">
            <img src="img/footer-bg.png" alt="Footer Background">
            <div class="footer-content">
                <div class="footer-content-sec1">
                    <div class="footer-sec footer-sec1">
                        <h3>GrocGo</h3><br>
                        <p>Copyright © 2024 GrocGo  LK (PVT) Ltd. </p>
                        <p>All Rights Reserved</p>
                        <p>Designed & Developed by .......................</p>
                    </div>
                </div>
                <div class="footer-content-sec2">
                    <div class="footer-sec footer-sec2">
                        <h3>Customer Care</h3><br>
                        <p><a href="about.html">About US</a></p>
                        <p><a href="services.html">Services</a></p>
                        <p><a href="product.html">Products</a></p>
                    </div>
                    <div class="footer-sec footer-sec3">
                        <h3>Contact Us</h3><br>
                        <p><a href="tel:+9471234567"><i class="fa fa-phone" aria-hidden="true"></i>&nbsp;&nbsp;+9471234567</a></p>
                        <p><a href="https://maps.app.goo.gl/iZKTKozdvHXE7WxQ9"><i class="fa fa-map-marker" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;Waidya Road, Dehiwala</a></p>
                        <p><a href="mailto: grocgo@gmail.com"><i class="fa fa-envelope" aria-hidden="true"></i>&nbsp;&nbsp;grocgo@gmail.com</a></p>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    </div>

<script>


    //------------------Top products carousel------------------
    document.querySelectorAll('.a-row-body').forEach(container => {
    const slide = container.querySelector('.a-slider');
    const prevButton = container.querySelector('.a-prev-btn');
    const nextButton = container.querySelector('.a-next-btn');

    let currentTranslateX = 0;
    const slideWidth = 100; // Assuming each slide moves by 100%
    let autoLoopInterval;

    // Function to advance to the next slide
    const nextSlide = () => {
      const nextTranslateX = currentTranslateX - slideWidth;
      if (nextTranslateX >= -(slide.children.length - 1) * slideWidth) {
        currentTranslateX = nextTranslateX;
      } else {
        // Reset to the first slide if reached the end
        currentTranslateX = 0;
      }
      slide.style.transition = 'transform 1s ease'; // Adjust duration for smoother transition
      slide.style.transform = `translateX(${currentTranslateX}%)`;
    };

    // Function to move to the previous slide
    const prevSlide = () => {
      const prevTranslateX = currentTranslateX + slideWidth;
      if (prevTranslateX <= 0) {
        currentTranslateX = prevTranslateX;
        slide.style.transition = 'transform 1s ease'; // Adjust duration for smoother transition
        slide.style.transform = `translateX(${currentTranslateX}%)`;
      }
    };

    // Start auto-looping
    const startAutoLoop = () => {
      autoLoopInterval = setInterval(() => {
        nextSlide();
      }, 5000); // Adjust the interval as needed (e.g., every 3 seconds)
    };

    // Stop auto-looping
    const stopAutoLoop = () => {
      clearInterval(autoLoopInterval);
    };

    // Event listeners for prev and next buttons
    nextButton.addEventListener('click', () => {
      stopAutoLoop(); // Stop auto-looping when manual navigation occurs
      nextSlide();
    });

    prevButton.addEventListener('click', () => {
      stopAutoLoop(); // Stop auto-looping when manual navigation occurs
      prevSlide();
    });

    // Start auto-looping when the page loads
    startAutoLoop();

    // Pause auto-looping when hovering over the slider
    slide.addEventListener('mouseover', stopAutoLoop);

    // Resume auto-looping when mouse leaves the slider
    slide.addEventListener('mouseleave', startAutoLoop);
  });







//--------------fetch data from json------------
  fetch('category.json')
  .then(response => response.json())
  .then(data => {
    // Filter out the top products
    const topProducts = data.categories.flatMap(category =>
      category.subcategories.flatMap(subcategory =>
        subcategory.products.filter(product => product.top)
      )
    );

    // Calculate the number of rows needed
    const numRows = Math.ceil(topProducts.length / 4);

    // Insert products into HTML structure
    const sliderContainer = document.querySelector('.a-slider');
    for (let i = 0; i < numRows; i++) {
      const row = document.createElement('div');
      row.classList.add('a-slider-row');

      const ul = document.createElement('ul');

      for (let j = i * 4; j < Math.min((i + 1) * 4, topProducts.length); j++) {
        const product = topProducts[j];

        const li = document.createElement('div');
        li.classList.add('row-card', 'a-slider-item');
        li.dataset.id = product.id;
        

        const rowcardimg =document.createElement('div');
        rowcardimg.classList.add('row-card-img');
        rowcardimg.onclick = function() {
            redirectToProductDetail(product.id);
        };

        // Append the created element to a container in the document
        // For example, if you want to append it to an element with id "container"
        document.getElementById('container').appendChild(rowcardimg);

        // Function to handle redirection to productDetail.html
        function redirectToProductDetail(productId) {
            // Redirect to productDetail.html with product ID as query parameter
            window.location.href = "productDetail.html?id=" + productId;
        }
        li.appendChild(rowcardimg);

        const rowcardtxt =document.createElement('div');
        rowcardtxt.classList.add('row-txt');
        li.appendChild(rowcardtxt);
        
        // Apply availability check and styling to the button
        const button = document.createElement('button');
        button.classList.add('btn-addtocart');
        button.textContent = 'Add to Cart';
        button.addEventListener('click', () => {
          // Add functionality for adding to cart here
        });

        if (product.availability === 'out of stock') {
          button.style.backgroundColor = '#DE3163';
          button.style.color = 'white';
          button.textContent = "Out of Stock";
          button.style.pointerEvents = 'none';
          button.disabled = true;
        } else {
          button.style.backgroundColor = ''; // Use default stylesheet color
          button.disabled = false;
        }

        const img = document.createElement('img');
        img.src = product.image;
        img.alt = product.name;

        const productName = document.createElement('h3');
        productName.textContent = product.name;

        const productPrice = document.createElement('h4');
        productPrice.textContent = `Rs.${product.price}`;

        rowcardimg.appendChild(img);
        rowcardtxt.appendChild(productName);
        rowcardtxt.appendChild(productPrice);
        rowcardtxt.appendChild(button);

        ul.appendChild(li);
      }

      row.appendChild(ul);
      sliderContainer.appendChild(row);
    }
  })
  .catch(error => {
    console.error('Error fetching data:', error);
  });







    //-------------Function to handle click on list items-------------
    function handleItemClick(itemId) {
        localStorage.setItem('selectedItemId', itemId);
        // Redirect to product.html
        window.location.href = 'product.html';
    }




    //--------------pass data from search input field to search page---------------
    function passDataAndRedirect() {
        const searchData = document.getElementById("searchInput").value.trim(); // Trim any whitespace
        if (searchData !== "") { // Check if search input is not empty
            // Encode search input to handle special characters
            const encodedSearchData = encodeURIComponent(searchData);
            // Redirect to search.html with search input as a query parameter
            window.location.href = "search.html?searchInput=" + encodedSearchData;
        } else {
            console.log("Search input is empty. Redirect aborted.");
        }
    }






    function handleItemClick(itemId) {
        // Redirect to product.html with clicked item ID as query parameter
        window.location.href = "product.html?id=" + itemId;
    }




</script>
<script src="script.js"></script>
<script src="product.js"></script>
<script src="shopping-cart.js"></script>
</body>
</html>