<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GrocGo</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>

    <!-- Navigation Bar/Header -->
    <header>
        <div class="header-navbar-checkout">
            <div class="navbar-row">
                <div class="navbar-logo">
                    <h2>GrocGo</h2>
                </div>
                <div class="navbar-items">
                    <ul>
                        <h3><a href="/index.html">Home</a></h3>
                        <h3><a href="/product.html">Products</a></h3>
                        <h3><a href="/services.html">Services</a></h3>
                        <h3><a href="/about.html">About Us</a></h3>
                        <div class="navbar-cart">
                            <small>Add to Cart</small>
                            <i class="fa fa-shopping-cart" aria-hidden="true">
                                <span id="smart-checkout-count" class="badge">0</span>
                            </i>
                        </div>
                        <div class="navbar-signin">
                            <i class="fa fa-user-circle-o" aria-hidden="true"></i>
                        </div>
                    </ul>
                </div>
            </div>
        </div>
    </header>

    <div class="promotion-img">
        <img src="/promotion img/Slide3.gif" width="100%" alt="">
    </div>

    <div class="search-body">
        <div class="search-left-section">
            <div class="search-now">
                <h3>Search Now</h3>
                <div class="search-now-bar">
                    <input type="text" name="" id="searchInput" placeholder="Search products..." oninput="suggestProducts()">
                    <button class="search-now-btn" onclick="searchProducts()">
                        <i class="fa fa-search"></i>
                    </button>
                    <ul id="searchResults"></ul>
                </div>
                <div class="filter-bar">
                    <h3>Filter By</h3>
                    <div class="filter-box">
                        <input class="range-bar" type="range" id="price" name="price" oninput="filterByPrice()" min="500" max="10000" step="1" value="500" onchange="updatePrice(this.value)">
                        <p><span>Rs.100</span> - <span id="price-display"></span></p>
                    </div>
                </div>
                <!-- <div class="categories-bar">
                    <h3>Categories</h3>
                    <div class="categories-box">

                    </div>
                </div> -->
            </div>
        </div>
        <div class="search-right-section">
            <div class="searching-result">
                <!-- <select id="sortSelect" onchange="filterAndSort()">
                    <option value="priceLowToHigh">Price Low to High</option>
                    <option value="priceHighToLow">Price High to Low</option>
                    <option value="nameAToZ">Name A to Z</option>
                    <option value="nameZToA">Name Z to A</option>
                </select> -->
            </div>
            
            <div class="row-body" id="results"></div>
            <!-- Card Row -->
            <!-- <div class="row-body">
                <ul>
                    <div class="row-card">
                        <div class="row-card-img">
                            <img src="product img/apple.jpg" alt="Product 1">
                        </div>
                        <div class="row-txt">
                            <h3>Fresh Apple</h3>
                            <h4>In Stock</h4>
                            <button class="btn-addtocart">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                    <div class="row-card">
                        <div class="row-card-img">
                            <img src="product img/snickers.jpg" alt="Product 2">
                        </div>
                        <div class="row-txt">
                            <h3>Snickers</h3>
                            <h4>In Stock</h4>
                            <button class="btn-addtocart">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                    <div class="row-card">
                        <div class="row-card-img">
                            <img src="product img/Orange juice.jpg" alt="Product 4">
                        </div>
                        <div class="row-txt">
                            <h3>Fresh Orange juice</h3>
                            <h4>In Stock</h4>
                            <button class="btn-addtocart">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                </ul>
            </div> -->

            <!-- Card Row -->
            <!-- <div class="row-body">
                <ul>
                    <div class="row-card">
                        <div class="row-card-img">
                            <img src="product img/snickers.jpg" alt="Product 2">
                        </div>
                        <div class="row-txt">
                            <h3>Snickers</h3>
                            <h4>In Stock</h4>
                            <button class="btn-addtocart">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                    <div class="row-card">
                        <div class="row-card-img">
                            <img src="product img/Almond.jpg" alt="Product 3">
                        </div>
                        <div class="row-txt">
                            <h3>Almonds</h3>
                            <h4>In Stock</h4>
                            <button class="btn-addtocart">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                    <div class="row-card">
                        <div class="row-card-img">
                            <img src="product img/Orange juice.jpg" alt="Product 4">
                        </div>
                        <div class="row-txt">
                            <h3>Fresh Orange juice</h3>
                            <h4>In Stock</h4>
                            <button class="btn-addtocart">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                </ul>
            </div> -->

        </div>
    </div>



    <!-- Footer Section -->
    <footer>
        <div class="footer-container">
            <img src="img/footer-bg.png" alt="Footer Background">
            <div class="footer-content">
                <div class="footer-content-sec1">
                    <div class="footer-sec footer-sec1">
                        <h3>GrocGo</h3><br>
                        <p>Copyright Â© 2024 GrocGo  LK (PVT) Ltd. </p>
                        <p>All Rights Reserved</p>
                        <p>Designed & Developed by .......................</p>
                    </div>
                </div>
                <div class="footer-content-sec2">
                    <div class="footer-sec footer-sec2">
                        <h3>Customer Care</h3><br>
                        <p><a href="/aboutus.html">About US</a></p>
                        <p><a href="/services.html">Services</a></p>
                        <p><a href="">Privacy Policy</a></p>
                    </div>
                    <div class="footer-sec footer-sec3">
                        <h3>Contact Us</h3><br>
                        <p><a href="tel:+9471234567"><i class="fa fa-phone" aria-hidden="true"></i>&nbsp;&nbsp;+9471234567</a></p>
                        <p><a href="https://maps.app.goo.gl/iZKTKozdvHXE7WxQ9"><i class="fa fa-map-marker" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;Waidya Road, Dehiwala</a></p>
                        <p><a href="mailto: grocgo@gmail.com"><i class="fa fa-envelope" aria-hidden="true"></i>&nbsp;&nbsp;grocgo@gmail.com</a></p>
                    </div>
                </div>
            </div>
        </div>
    </footer> 

<script>
    function updatePrice(val) {
        document.getElementById('price-display').textContent = 'Rs.' + val;
    }








    let searchData; // Variable to store fetched data

        function fetchProducts() {
            return fetch('category.json')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    searchData = data;
                })
                .catch(error => {
                    console.error('Error fetching data:', error);
                });
        }

        function searchProducts() {
            const searchInput = document.getElementById('searchInput').value.toLowerCase();
            const filteredData = searchData.categories.flatMap(category =>
                category.subcategories.flatMap(subcategory =>
                    subcategory.products.filter(product =>
                        product.name.toLowerCase().includes(searchInput)
                    )
                )
            );
            displayProducts(filteredData);
        }

        function filterByPrice() {
            const maxPrice = document.getElementById('price').value;
            const filteredData = searchData.categories.flatMap(category =>
                category.subcategories.flatMap(subcategory =>
                    subcategory.products.filter(product =>
                        product.price <= maxPrice
                    )
                )
            );
            displayProducts(filteredData);
        }

        // function displayProducts(products) {
        //     const searchResultsContainer = document.getElementById('results');
        //     searchResultsContainer.innerHTML = ''; // Clear previous results

        //     products.forEach(product => {
        //         const productDiv = document.createElement('div');
        //         productDiv.classList.add('product');
        //         productDiv.innerHTML = `
        //             <img src="${product.image}" alt="${product.name}">
        //             <h3>${product.name}</h3>
        //             <p>${product.description}</p>
        //             <p>Price: $${product.price.toFixed(2)}</p>
        //         `;
        //         searchResultsContainer.appendChild(productDiv);
        //     });
        // }


        function displayProducts(results) {
        const searchInput = document.getElementById('searchInput').value.toLowerCase();
        var resultsContainer = document.getElementById('results');
        // Clear previous results
        resultsContainer.innerHTML = '';

        // Filter products based on search input
        const filteredResults = results.filter(product => product.name.toLowerCase().includes(searchInput));


        let productCounter = 0;
        var ul = document.createElement('ul');
        resultsContainer.appendChild(ul);
        // Display each result
        filteredResults.forEach(product => {
            if (productCounter % 3 === 0) {
                // Create a new row every 3 products
                var newRow = document.createElement('div');
                newRow.classList.add('search-row');
                resultsContainer.appendChild(newRow);
                var newUl = document.createElement('ul');
                newRow.appendChild(newUl);
                ul = newUl; // Update ul to the newly created ul
            }

            var rowCard = document.createElement('div');
            rowCard.classList.add('row-card');

            var rowCardImg = document.createElement('div');
            rowCardImg.classList.add('row-card-img');
            rowCard.appendChild(rowCardImg);

            var image = document.createElement('img');
            image.src = product.image;
            image.alt = product.name;
            rowCardImg.appendChild(image);

            var rowTxt = document.createElement('div');
            rowTxt.classList.add('row-txt');
            rowCard.appendChild(rowTxt);

            var name = document.createElement('h3');
            name.textContent = product.name;
            rowTxt.appendChild(name);

            var head4 = document.createElement('h4');
            head4.textContent = 'Rs.' + product.price;
            rowTxt.appendChild(head4);

            var button = document.createElement('button');
            button.classList.add('btn-addtocart');
            button.textContent = 'Add to Cart';
            rowTxt.appendChild(button);

            ul.appendChild(rowCard);

            productCounter++;
        });

        // If no results found
        if (filteredResults.length === 0) {
            var noResultsMessage = document.createElement('p');
            noResultsMessage.textContent = 'No products found matching your search...';
            noResultsMessage.classList.add('no-result-message');
            resultsContainer.appendChild(noResultsMessage);
        }
    }




        // Fetch products data when the page loads
        fetchProducts().then(() => {
            // Display all products initially
            displayProducts(searchData.categories.flatMap(category =>
                category.subcategories.flatMap(subcategory => subcategory.products)
            ));
        });







        







        


    //     function displayProducts(results) {
    //     var resultsContainer = document.getElementById('results');
    //     // Clear previous results
    //     resultsContainer.innerHTML = '';

    //     let productCounter = 0;
    //     var ul = document.createElement('ul');
    //     resultsContainer.appendChild(ul);
    //     // Display each result
    //     results.forEach(product => {
    //         if (productCounter % 3 === 0) {
    //             // Create a new row every 3 products
    //             var newRow = document.createElement('div');
    //             newRow.classList.add('search-row');
    //             resultsContainer.appendChild(newRow);
    //             var newUl = document.createElement('ul');
    //             newRow.appendChild(newUl);
    //             ul = newUl; // Update ul to the newly created ul
    //         }

    //         var rowCard = document.createElement('div');
    //         rowCard.classList.add('row-card');

    //         var rowCardImg = document.createElement('div');
    //         rowCardImg.classList.add('row-card-img');
    //         rowCard.appendChild(rowCardImg);

    //         var image = document.createElement('img');
    //         image.src = product.image;
    //         image.alt = product.name;
    //         rowCardImg.appendChild(image);

    //         var rowTxt = document.createElement('div');
    //         rowTxt.classList.add('row-txt');
    //         rowCard.appendChild(rowTxt);

    //         var name = document.createElement('h3');
    //         name.textContent = product.name;
    //         rowTxt.appendChild(name);

    //         var head4 = document.createElement('h4');
    //         head4.textContent = 'Rs.' + product.price;
    //         rowTxt.appendChild(head4);

    //         var button = document.createElement('button');
    //         button.classList.add('btn-addtocart');
    //         button.textContent = 'Add to Cart';
    //         rowTxt.appendChild(button);

    //         ul.appendChild(rowCard);

    //         productCounter++;
    //     });

    //     // If no results found
    //     if (results.length === 0) {
    //         var noResultsMessage = document.createElement('p');
    //         noResultsMessage.textContent = 'No products found matching your search...';
    //         noResultsMessage.classList.add('no-result-message');
    //         resultsContainer.appendChild(noResultsMessage);
    //     }

    // }









    

</script>
<script src="product.js"></script>
</body>
</html>