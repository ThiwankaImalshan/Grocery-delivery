<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GrocGo</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>

    <!-- Navigation Bar/Header -->
    <header>
        <div class="header-navbar-checkout">
            <div class="navbar-row">
                <div class="navbar-logo">
                    <h2>GrocGo</h2>
                </div>
                <div class="navbar-items">
                    <ul>
                        <h3><a href="/index.html">Home</a></h3>
                        <h3><a href="/product.html">Products</a></h3>
                        <h3><a href="/services.html">Services</a></h3>
                        <h3><a href="/about.html">About Us</a></h3>
                        <div class="navbar-cart">
                            <small>Add to Cart</small>
                            <i class="fa fa-shopping-cart" aria-hidden="true">
                                <span id="smart-checkout-count" class="badge">0</span>
                            </i>
                        </div>
                        <div class="navbar-signin">
                            <i class="fa fa-user-circle-o" aria-hidden="true"></i>
                        </div>
                    </ul>
                </div>
            </div>
        </div>
    </header>

    <div class="promotion-img">
        <img src="/promotion img/Slide3.gif" width="100%" alt="">
    </div>

    <div class="search-body">
        <div class="search-left-section">
            <div class="search-now">
                <h3>Search Now</h3>
                <div class="search-now-bar">
                    <input type="text" name="" id="searchInput" placeholder="Search">
                    <button class="search-now-btn" onclick="searchProducts()">
                        <i class="fa fa-search"></i>
                    </button>
                    <ul id="recommendations"></ul>
                </div>
                <div class="filter-bar">
                    <h3>Filter By</h3>
                    <div class="filter-box">
                        <input class="range-bar" type="range" id="vol" name="vol" min="20" max="">
                        <p><span>LKR 1,000</span> - <span>LKR 30,000</span></p>
                    </div>
                </div>
                <div class="categories-bar">
                    <h3>Categories</h3>
                    <div class="categories-box">

                    </div>
                </div>
            </div>
        </div>
        <div class="search-right-section">
            <div class="searching-result">

            </div>
            
            <div class="row-body" id="results"></div>
            <!-- Card Row -->
            <!-- <div class="row-body">
                <ul>
                    <div class="row-card">
                        <div class="row-card-img">
                            <img src="product img/apple.jpg" alt="Product 1">
                        </div>
                        <div class="row-txt">
                            <h3>Fresh Apple</h3>
                            <h4>In Stock</h4>
                            <button class="btn-addtocart">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                    <div class="row-card">
                        <div class="row-card-img">
                            <img src="product img/snickers.jpg" alt="Product 2">
                        </div>
                        <div class="row-txt">
                            <h3>Snickers</h3>
                            <h4>In Stock</h4>
                            <button class="btn-addtocart">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                    <div class="row-card">
                        <div class="row-card-img">
                            <img src="product img/Orange juice.jpg" alt="Product 4">
                        </div>
                        <div class="row-txt">
                            <h3>Fresh Orange juice</h3>
                            <h4>In Stock</h4>
                            <button class="btn-addtocart">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                </ul>
            </div> -->

            <!-- Card Row -->
            <!-- <div class="row-body">
                <ul>
                    <div class="row-card">
                        <div class="row-card-img">
                            <img src="product img/snickers.jpg" alt="Product 2">
                        </div>
                        <div class="row-txt">
                            <h3>Snickers</h3>
                            <h4>In Stock</h4>
                            <button class="btn-addtocart">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                    <div class="row-card">
                        <div class="row-card-img">
                            <img src="product img/Almond.jpg" alt="Product 3">
                        </div>
                        <div class="row-txt">
                            <h3>Almonds</h3>
                            <h4>In Stock</h4>
                            <button class="btn-addtocart">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                    <div class="row-card">
                        <div class="row-card-img">
                            <img src="product img/Orange juice.jpg" alt="Product 4">
                        </div>
                        <div class="row-txt">
                            <h3>Fresh Orange juice</h3>
                            <h4>In Stock</h4>
                            <button class="btn-addtocart">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                </ul>
            </div> -->

        </div>
    </div>



    <!-- Footer Section -->
    <footer>
        <div class="footer-container">
            <img src="img/footer-bg.png" alt="Footer Background">
            <div class="footer-content">
                <div class="footer-content-sec1">
                    <div class="footer-sec footer-sec1">
                        <h3>GrocGo</h3><br>
                        <p>Copyright Â© 2024 GrocGo  LK (PVT) Ltd. </p>
                        <p>All Rights Reserved</p>
                        <p>Designed & Developed by .......................</p>
                    </div>
                </div>
                <div class="footer-content-sec2">
                    <div class="footer-sec footer-sec2">
                        <h3>Customer Care</h3><br>
                        <p><a href="/aboutus.html">About US</a></p>
                        <p><a href="/services.html">Services</a></p>
                        <p><a href="">Privacy Policy</a></p>
                    </div>
                    <div class="footer-sec footer-sec3">
                        <h3>Contact Us</h3><br>
                        <p><a href="tel:+9471234567"><i class="fa fa-phone" aria-hidden="true"></i>&nbsp;&nbsp;+9471234567</a></p>
                        <p><a href="https://maps.app.goo.gl/iZKTKozdvHXE7WxQ9"><i class="fa fa-map-marker" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;Waidya Road, Dehiwala</a></p>
                        <p><a href="mailto: grocgo@gmail.com"><i class="fa fa-envelope" aria-hidden="true"></i>&nbsp;&nbsp;grocgo@gmail.com</a></p>
                    </div>
                </div>
            </div>
        </div>
    </footer> 


    <script>
        function searchProducts() {
            // Get the input text from the search box
            var searchText = document.getElementById('searchInput').value.toLowerCase();

            // Fetch the JSON data
            fetch('category.json')
            .then(response => response.json())
            .then(data => {
                var results = [];
                // Loop through categories
                data.categories.forEach(category => {
                    // Loop through subcategories
                    category.subcategories.forEach(subcategory => {
                        // Loop through products
                        subcategory.products.forEach(product => {
                            // Check if the product name contains the search text
                            if (product.name.toLowerCase().includes(searchText)) {
                                // Add the matching product to results
                                results.push(product);
                            }
                        });
                    });
                });

                // Display search results
                displayResults(results);
            })
            .catch(error => console.error('Error fetching data:', error));
        }

        // function displayResults(results) {
        //     var resultsContainer = document.getElementById('results');
        //     // Clear previous results
        //     resultsContainer.innerHTML = '';

        //     let productCounter = 0;
        //     var ul = document.createElement('ul');
        //     resultsContainer.appendChild(ul);
        //     // Display each result
        //     results.forEach(product => {
        //         // if (productCounter % 3 === 0) {
                    
        //         // }
        //         var rowCard = document.createElement('div');
        //         rowCard.classList.add('row-card');

        //         var rowCardImg = document.createElement('div');
        //         rowCardImg.classList.add('row-card-img');
        //         rowCard.appendChild(rowCardImg);

        //         var image = document.createElement('img');
        //         image.src = product.image;
        //         image.alt = product.name;
        //         rowCardImg.appendChild(image);

        //         var rowTxt = document.createElement('div');
        //         rowTxt.classList.add('row-txt');
        //         rowCard.appendChild(rowTxt);

        //         var name = document.createElement('h3');
        //         name.textContent = product.name;
        //         rowTxt.appendChild(name);

        //         var head4 = document.createElement('h4');
        //         head4.textContent = product.name;
        //         rowTxt.appendChild(head4);

        //         ul.appendChild(rowCard);

        //         productCounter++;

        //     });

        //     // If no results found
        //     if (results.length === 0) {
        //         var noResultsMessage = document.createElement('p');
        //         noResultsMessage.textContent = 'No products found matching your search.';
        //         resultsContainer.appendChild(noResultsMessage);
        //     }
        // }

        
        function displayResults(results) {
        var resultsContainer = document.getElementById('results');
        // Clear previous results
        resultsContainer.innerHTML = '';

        let productCounter = 0;
        var ul = document.createElement('ul');
        resultsContainer.appendChild(ul);
        // Display each result
        results.forEach(product => {
            if (productCounter % 3 === 0) {
                // Create a new row every 3 products
                var newRow = document.createElement('div');
                newRow.classList.add('search-row');
                resultsContainer.appendChild(newRow);
                var newUl = document.createElement('ul');
                newRow.appendChild(newUl);
                ul = newUl; // Update ul to the newly created ul
            }

            var rowCard = document.createElement('div');
            rowCard.classList.add('row-card');

            var rowCardImg = document.createElement('div');
            rowCardImg.classList.add('row-card-img');
            rowCard.appendChild(rowCardImg);

            var image = document.createElement('img');
            image.src = product.image;
            image.alt = product.name;
            rowCardImg.appendChild(image);

            var rowTxt = document.createElement('div');
            rowTxt.classList.add('row-txt');
            rowCard.appendChild(rowTxt);

            var name = document.createElement('h3');
            name.textContent = product.name;
            rowTxt.appendChild(name);

            var head4 = document.createElement('h4');
            head4.textContent = 'Rs.'+ product.price;
            rowTxt.appendChild(head4);

            var button = document.createElement('button');
            button.classList.add('btn-addtocart');
            button.textContent = 'Add to Cart';
            rowTxt.appendChild(button);

            ul.appendChild(rowCard);

            productCounter++;
        });

            //If no results found
            if (results.length === 0) {
                var noResultsMessage = document.createElement('p');
                noResultsMessage.textContent = 'No products found matching your search.';
                resultsContainer.appendChild(noResultsMessage);
            }
}





        // Load product names from product.json
        fetch('category.json')
        .then(response => {
            if (!response.ok) {
            throw new Error('Network response was not ok');
            }
            return response.json();
        })
        .then(data => {
            // Extract product names
            const productNames = [];
            data.categories.forEach(category => {
            category.subcategories.forEach(subcategory => {
                subcategory.products.forEach(product => {
                productNames.push(product.name.toLowerCase());
                });
            });
            });

            // Get input element and recommendations list
            const productNameInput = document.getElementById('searchInput');
            const recommendationsList = document.getElementById('recommendations');

            // Function to update recommendations based on user input
            productNameInput.addEventListener('input', function() {
            const inputText = this.value.toLowerCase();
            const matchingNames = productNames.filter(name => name.includes(inputText));

            // Clear previous recommendations
            recommendationsList.innerHTML = '';

            // Display up to 5 matching names as recommendations
            matchingNames.slice(0, 5).forEach(name => {
                const listItem = document.createElement('li');
                listItem.textContent = name;
                recommendationsList.appendChild(listItem);
            });
            });
        })
        .catch(error => {
            // Error fetching or processing data
            console.error('Error:', error);
        });

    </script>
    
</body>
</html>